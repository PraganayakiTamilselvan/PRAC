package com.lnt.evs.ui;

import javax.swing.JOptionPane;
import java.util.ArrayList;
import com.ust.evs.bean.ElectionBean;
import com.ust.evs.bean.PartyBean;
import com.ust.evs.dao.AdministratorDAO;
import com.ust.evs.service.Administrator;

public class Login {
    public static void main(String[] args) {
        Administrator admin = new AdministratorDAO();
        boolean continu = true;        
        String[] userTypes = {"ADMIN", "VOTER", "EO"};
        int selectedUserType = JOptionPane.showOptionDialog(
            null,
            "Select User Type:",
            "Main Menu",
            JOptionPane.DEFAULT_OPTION,
            JOptionPane.INFORMATION_MESSAGE,
            null,
            userTypes,
            userTypes[0]
        );
        if (selectedUserType == -1) return;        
        String Id = JOptionPane.showInputDialog("Enter User ID:");
        String pass = JOptionPane.showInputDialog("Enter Password:");
        while (continu) {
            switch (selectedUserType) {
                case 0: // ADMIN
                    if (Id.equals("ADMIN") && pass.equals("123")) {
                        String menuMessage =
                            "ADMIN MAIN MENU:\n\n" +
                            "AD-001. Add Election\n" +
                            "AD-002. View Upcoming Elections\n" +
                            "AD-003. View All Elections\n" +
                            "AD-004. Add Party\n" ;
                    
//                            "5. View All Parties\n" +
//                            "6. Add Candidate\n" +
//                            "7. View Candidates by Election Name\n" +
//                            "8. View Candidates by Party ID\n" +
//                            "9. View Pending Applications\n" +
//                            "10. Forward Voter ID Request\n" +
//                            "11. Approve Election Results\n";
                        JOptionPane.showMessageDialog(null, menuMessage, "ADMIN MAIN MENU", JOptionPane.INFORMATION_MESSAGE);

                        String userId = JOptionPane.showInputDialog("Enter Admin User ID:");
                        String password = JOptionPane.showInputDialog("Enter Password:");

                        switch (userId) {
                            case "AD-001":
                                if (password.equals("AD-001")) {
                                    JOptionPane.showMessageDialog(null, "Welcome Admin AD-001");
                                    String electionID = JOptionPane.showInputDialog("Enter Election ID:");
                                    String name = JOptionPane.showInputDialog("Enter Election Name:");
                                    String electionDate = JOptionPane.showInputDialog("Enter Election Date (yyyy-MM-dd):");
                                    String district = JOptionPane.showInputDialog("Enter District:");
                                    String constituency = JOptionPane.showInputDialog("Enter Constituency:");
                                    String countingDate = JOptionPane.showInputDialog("Enter Counting Date (yyyy-MM-dd):");

                                    ElectionBean electionBean = new ElectionBean(
                                        electionID, name, electionDate, district, constituency, countingDate
                                    );

                                    String result = admin.addElection(electionBean);
                                    if (result.equals("SUCCESS")) {
                                        JOptionPane.showMessageDialog(null, "Election added successfully!");
                                    } else if (result.equals("FAIL")) {
                                        JOptionPane.showMessageDialog(null, "Invalid election data.");
                                    } else {
                                        JOptionPane.showMessageDialog(null, "An error occurred while adding the election.");
                                    }
                                } else {
                                    JOptionPane.showMessageDialog(null, "Incorrect password for AD-001");
                                }
                                break;

                            case "AD-002":
                                if (password.equals("AD-002")) {
                                    JOptionPane.showMessageDialog(null, "Welcome Admin AD-002");
                                    ArrayList<ElectionBean> upcoming = admin.viewAllUpcomingElections();
                                    if (upcoming.isEmpty()) {
                                        JOptionPane.showMessageDialog(null, "No upcoming elections found.");
                                    } else {
                                        StringBuilder message = new StringBuilder("Upcoming Elections:\n");
                                        for (ElectionBean e : upcoming) {
                                            message.append("ELECTIONID: ").append(e.getElectionID())
                                                   .append(", ELECTION NAME: ").append(e.getName())
                                                   .append(", ELECTION DATE: ").append(e.getElectionDate())
                                                   .append("\n");
                                        }
                                        JOptionPane.showMessageDialog(null, message.toString());
                                    }
                                } else {
                                    JOptionPane.showMessageDialog(null, "Incorrect password for AD-002");
                                }
                                break;

                            case "AD-003":
                                if (password.equals("AD-003")) {
                                    JOptionPane.showMessageDialog(null, "Welcome Admin AD-003");
                                    ArrayList<ElectionBean> electionlist = admin.viewElections();
                                    if (electionlist.isEmpty()) {
                                        JOptionPane.showMessageDialog(null, "No elections found");
                                    } else {
                                        StringBuilder message = new StringBuilder("All Elections:\n");
                                        for (ElectionBean e : electionlist) {
                                            message.append("ELECTIONID: ").append(e.getElectionID())
                                                   .append(", ELECTION NAME: ").append(e.getName())
                                                   .append(", ELECTION DATE: ").append(e.getElectionDate())
                                                   .append("\n");
                                        }
                                        JOptionPane.showMessageDialog(null, message.toString());
                                    }
                                } else {
                                    JOptionPane.showMessageDialog(null, "Incorrect password for AD-003");
                                }
                                break;

                            case "AD-004": //ADD PARTY
                                if (password.equals("AD-004")) {
                                    JOptionPane.showMessageDialog(null, "Welcome Admin AD-004");
                                    String partyID = JOptionPane.showInputDialog("Enter Party ID:");
                                    String name = JOptionPane.showInputDialog("Enter Party name:");
                                    String leader = JOptionPane.showInputDialog("Enter Leader name:");
                                    String symbol = JOptionPane.showInputDialog("Enter Symbol:");

                                    PartyBean partyBean = new PartyBean(
                                    	    partyID, name, leader, symbol
                                    	);
                                    String result = admin.addParty(partyBean);
                                    if (result.equals("SUCCESS")) {
                                        JOptionPane.showMessageDialog(null, "Election added successfully!");
                                    } else if (result.equals("FAIL")) {
                                        JOptionPane.showMessageDialog(null, "Invalid election data.");
                                    } else {
                                        JOptionPane.showMessageDialog(null, "An error occurred while adding the election.");
                                    }
                                    
                                } else {
                                    JOptionPane.showMessageDialog(null, "Incorrect password for AD-004");
                                }
                                break;

                            default:
                                JOptionPane.showMessageDialog(null, "Invalid Admin User ID");
                                break;
                        }
                    } else {
                        JOptionPane.showMessageDialog(null, "Invalid ADMIN credentials.");
                    }
                    break;

                case 1: // VOTER
                    String voterId = JOptionPane.showInputDialog("Enter Voter ID:");
                    String voterPassword = JOptionPane.showInputDialog("Enter Password:");
                    JOptionPane.showMessageDialog(null, "Welcome Voter " + voterId);
                    break;

                case 2: // EO
                    String eoId = JOptionPane.showInputDialog("Enter EO ID:");
                    String eoPassword = JOptionPane.showInputDialog("Enter Password:");
                    JOptionPane.showMessageDialog(null, "Welcome Election Officer " + eoId);
                    break;

                default:
                    JOptionPane.showMessageDialog(null, "Invalid selection or cancelled.");
                    continu = false;
                    break;
            }

            if (selectedUserType != -1) {
                int choice = JOptionPane.showConfirmDialog(null, "Do you want to continue?", "Continue Session", JOptionPane.YES_NO_OPTION);
                if (choice != JOptionPane.YES_OPTION) {
                    continu = false;
                }
            }
        }
    }
}